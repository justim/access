<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-presenters" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.1">
<title data-rh="true">Presenters | Access</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://access.justim.net/docs/presenters"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Presenters | Access"><meta data-rh="true" name="description" content="Presenters are Access&#x27; way to serialize entities and collection to something you"><meta data-rh="true" property="og:description" content="Presenters are Access&#x27; way to serialize entities and collection to something you"><link data-rh="true" rel="icon" href="/images/favicon.ico"><link data-rh="true" rel="canonical" href="https://access.justim.net/docs/presenters"><link data-rh="true" rel="alternate" href="https://access.justim.net/docs/presenters" hreflang="en"><link data-rh="true" rel="alternate" href="https://access.justim.net/docs/presenters" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.4dc872f0.css">
<script src="/assets/js/runtime~main.6e0abcdb.js" defer="defer"></script>
<script src="/assets/js/main.65980efe.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/images/access.png" alt="Access logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/images/access.png" alt="Access logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Access</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/justim/access" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/docs">Access</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs">Introduction</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/database">Features</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/database">Database</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/entities">Entities</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cascade">Cascade</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/repositories">Repositories</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/queries">Queries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/collections">Collections</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/presenters">Presenters</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/transactions">Transactions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/locks">Locks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/profiler">Profiler</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Features</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Presenters</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Presenters</h1></header><p>Presenters are Access&#x27; way to serialize entities and collection to something you
can send over the wire with <code>json_encode</code>. To be more specific, it converts
entities to <code>array</code>s and because collections are basically lists of entities,
those get converted to <code>array</code>s of <code>array</code>s.</p>
<p>But why, you might ask, not just use <code>\JsonSerializable</code> for this? Presenters
add a layer inbetween the entity and the resulting array to allow for more
configuration and flexibility. For example, for different reasons you might want
to expose different fields of a single entity. And, by using the extra layer
Access can provide a lot of helper methods to convert your entities with ease,
including, but not limited to, solving the <code>n+1</code> problem for nested entities.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="simple-entity-presenter">Simple entity presenter<a href="#simple-entity-presenter" class="hash-link" aria-label="Direct link to Simple entity presenter" title="Direct link to Simple entity presenter">​</a></h2>
<p>To start simple you need to create a class that extends the <code>EntityPresenter</code>,
and implement two methods. One to tell which entity is associated with this
presenter (<code>getEntityKlass</code>) and the other to do the converting (<code>fromEntity</code>).</p>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">use</span><span class="token plain"> </span><span class="token package">Access</span><span class="token package punctuation" style="color:#f8f8f2">\</span><span class="token package">Presenter</span><span class="token package punctuation" style="color:#f8f8f2">\</span><span class="token package">EntityPresenter</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">class</span><span class="token plain"> </span><span class="token class-name-definition class-name" style="color:#e6db74">UserPresenter</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">extends</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">EntityPresenter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token comment" style="color:#8292a2;font-style:italic">/**</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#8292a2;font-style:italic">     * Get the entity class associated with this presenter</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#8292a2;font-style:italic">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">public</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">static</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function-definition function" style="color:#e6db74">getEntityKlass</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token keyword return-type" style="color:#66d9ef">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token keyword" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token class-name static-context" style="color:#e6db74">User</span><span class="token operator" style="color:#66d9ef">::</span><span class="token keyword" style="color:#66d9ef">class</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token comment" style="color:#8292a2;font-style:italic">/**</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#8292a2;font-style:italic">     * Convert entity to an array</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#8292a2;font-style:italic">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">public</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function-definition function" style="color:#e6db74">fromEntity</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token class-name type-declaration" style="color:#e6db74">Entity</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$user</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">?</span><span class="token keyword return-type" style="color:#66d9ef">array</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token keyword" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token string single-quoted-string" style="color:#a6e22e">&#x27;id&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$user</span><span class="token operator" style="color:#66d9ef">-&gt;</span><span class="token function" style="color:#e6db74">getId</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To use this presenter you need the <a href="/docs/database"><code>Access\Database</code></a> instance and
call <code>presentEntity</code>.</p>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#8292a2;font-style:italic">// get a user from somewhere</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token variable" style="color:#f8f8f2">$user</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$db</span><span class="token operator" style="color:#66d9ef">-&gt;</span><span class="token function" style="color:#e6db74">findOne</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token class-name static-context" style="color:#e6db74">User</span><span class="token operator" style="color:#66d9ef">::</span><span class="token keyword" style="color:#66d9ef">class</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">1</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token variable" style="color:#f8f8f2">$result</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$db</span><span class="token operator" style="color:#66d9ef">-&gt;</span><span class="token function" style="color:#e6db74">presentEntity</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token class-name static-context" style="color:#e6db74">UserPresenter</span><span class="token operator" style="color:#66d9ef">::</span><span class="token keyword" style="color:#66d9ef">class</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$user</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#8292a2;font-style:italic">// =&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token string single-quoted-string" style="color:#a6e22e">&#x27;id&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">1</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>As you might have noticed, the return type of the <code>fromEntity</code> method is
<code>?array</code>, indicating that it is possible to return <code>null</code>. Returning <code>null</code>
could help in cases where you don&#x27;t want to output the entity, based on some
kind of logic. For example, you never want to return admin users from your
entity presenter, just return <code>null</code> when the user is an admin and the presenter
will completely filter out the user. This is more useful when you have a list of
users and want to filter some out.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="collection-presenters">Collection presenters<a href="#collection-presenters" class="hash-link" aria-label="Direct link to Collection presenters" title="Direct link to Collection presenters">​</a></h2>
<p>Presenting a collection uses the same presenter as the entity, it just executes
the <code>fromEntity</code> multiple times and puts them in an <code>array</code>.</p>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#8292a2;font-style:italic">// get a list of users from somewhere</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token variable" style="color:#f8f8f2">$users</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$db</span><span class="token operator" style="color:#66d9ef">-&gt;</span><span class="token function" style="color:#e6db74">getRepository</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token class-name static-context" style="color:#e6db74">User</span><span class="token operator" style="color:#66d9ef">::</span><span class="token keyword" style="color:#66d9ef">class</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token operator" style="color:#66d9ef">-&gt;</span><span class="token function" style="color:#e6db74">findAllCollection</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token variable" style="color:#f8f8f2">$result</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$db</span><span class="token operator" style="color:#66d9ef">-&gt;</span><span class="token function" style="color:#e6db74">presentCollection</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token class-name static-context" style="color:#e6db74">UserPresenter</span><span class="token operator" style="color:#66d9ef">::</span><span class="token keyword" style="color:#66d9ef">class</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$users</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#8292a2;font-style:italic">// =&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token string single-quoted-string" style="color:#a6e22e">&#x27;id&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">1</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token string single-quoted-string" style="color:#a6e22e">&#x27;id&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">2</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token comment" style="color:#8292a2;font-style:italic">// ..</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="nested-presenters">Nested presenters<a href="#nested-presenters" class="hash-link" aria-label="Direct link to Nested presenters" title="Direct link to Nested presenters">​</a></h2>
<p>To make things more interesting, we need create another presenter, this time for
the <code>Project</code> entity. This <code>ProjectPresenter</code> presenter references another
presenter by using <code>present()</code>, you need to provide the presenter you want to
use for your field and the ID of the entity. Calling the <code>present</code> method does
not really do anything, it merely saves the needed information and &quot;marks&quot; the
location in the result. The presenter will then lookup all the &quot;markers&quot;, fetch
the needed entities in a single query and resolve all the markers with the
result of entity presenter.</p>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">use</span><span class="token plain"> </span><span class="token package">Access</span><span class="token package punctuation" style="color:#f8f8f2">\</span><span class="token package">Presenter</span><span class="token package punctuation" style="color:#f8f8f2">\</span><span class="token package">EntityPresenter</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">class</span><span class="token plain"> </span><span class="token class-name-definition class-name" style="color:#e6db74">ProjectPresenter</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">extends</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">EntityPresenter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">public</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">static</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function-definition function" style="color:#e6db74">getEntityKlass</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token keyword return-type" style="color:#66d9ef">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token keyword" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token class-name static-context" style="color:#e6db74">Project</span><span class="token operator" style="color:#66d9ef">::</span><span class="token keyword" style="color:#66d9ef">class</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">public</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function-definition function" style="color:#e6db74">fromEntity</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token class-name type-declaration" style="color:#e6db74">Entity</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$project</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">?</span><span class="token keyword return-type" style="color:#66d9ef">array</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token keyword" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token string single-quoted-string" style="color:#a6e22e">&#x27;id&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$project</span><span class="token operator" style="color:#66d9ef">-&gt;</span><span class="token function" style="color:#e6db74">getId</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token string single-quoted-string" style="color:#a6e22e">&#x27;owner&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$this</span><span class="token operator" style="color:#66d9ef">-&gt;</span><span class="token function" style="color:#e6db74">present</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token class-name static-context" style="color:#e6db74">UserPresenter</span><span class="token operator" style="color:#66d9ef">::</span><span class="token keyword" style="color:#66d9ef">class</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$project</span><span class="token operator" style="color:#66d9ef">-&gt;</span><span class="token function" style="color:#e6db74">getOwnerId</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Executing this entity presenter will automatically create a <code>UserPresenter</code>, fetch
the associated <code>User</code> entity with the ID coming from <code>getOwnerId</code>.</p>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#8292a2;font-style:italic">// get a project from somewhere</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token variable" style="color:#f8f8f2">$project</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$db</span><span class="token operator" style="color:#66d9ef">-&gt;</span><span class="token function" style="color:#e6db74">findOne</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token class-name static-context" style="color:#e6db74">Project</span><span class="token operator" style="color:#66d9ef">::</span><span class="token keyword" style="color:#66d9ef">class</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">1</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token variable" style="color:#f8f8f2">$result</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$db</span><span class="token operator" style="color:#66d9ef">-&gt;</span><span class="token function" style="color:#e6db74">presentEntity</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token class-name static-context" style="color:#e6db74">ProjectPresenter</span><span class="token operator" style="color:#66d9ef">::</span><span class="token keyword" style="color:#66d9ef">class</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$project</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#8292a2;font-style:italic">// =&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token string single-quoted-string" style="color:#a6e22e">&#x27;id&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">1</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token string single-quoted-string" style="color:#a6e22e">&#x27;owner&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token string single-quoted-string" style="color:#a6e22e">&#x27;id&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">1</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The underlying presenter fetches the needed <code>User</code> entity based on the mark left
my <code>present</code>. This case it is obvious that done with a single query, but this
scales to using this entity presenter for collections as well.</p>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#8292a2;font-style:italic">// get a list of projects from somewhere</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token variable" style="color:#f8f8f2">$projects</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$db</span><span class="token operator" style="color:#66d9ef">-&gt;</span><span class="token function" style="color:#e6db74">getRepository</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token class-name static-context" style="color:#e6db74">Project</span><span class="token operator" style="color:#66d9ef">::</span><span class="token keyword" style="color:#66d9ef">class</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token operator" style="color:#66d9ef">-&gt;</span><span class="token function" style="color:#e6db74">findAllCollection</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token variable" style="color:#f8f8f2">$result</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$db</span><span class="token operator" style="color:#66d9ef">-&gt;</span><span class="token function" style="color:#e6db74">presentCollection</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token class-name static-context" style="color:#e6db74">ProjectPresenter</span><span class="token operator" style="color:#66d9ef">::</span><span class="token keyword" style="color:#66d9ef">class</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$projects</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#8292a2;font-style:italic">// =&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token string single-quoted-string" style="color:#a6e22e">&#x27;id&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">1</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token string single-quoted-string" style="color:#a6e22e">&#x27;owner&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token string single-quoted-string" style="color:#a6e22e">&#x27;id&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">1</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token string single-quoted-string" style="color:#a6e22e">&#x27;id&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">2</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token string single-quoted-string" style="color:#a6e22e">&#x27;owner&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token string single-quoted-string" style="color:#a6e22e">&#x27;id&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">2</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token comment" style="color:#8292a2;font-style:italic">// ..</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This is also done with a single query; all the marks are collected, then the
entities are fetched in one go and after that the markers are replaced with the
result of the <code>fromEntity</code> of the associated entity presenter. It is possible
that that result also contains a bunch of marker, like the profile image of the
owner, for example. The presenter will keep resolving the markers for as long as
the are there. Adding a profile image from another entity presenter would only
increase the number of queries with one.</p>
<p>Of course <code>present</code> is a little bit limited, it only works for <code>has-one</code>
relations. The <code>EntityPresenter</code> provides a bunch more methods to resolve more
complicated relations as well.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="has-many-relation"><code>has-many</code> relation<a href="#has-many-relation" class="hash-link" aria-label="Direct link to has-many-relation" title="Direct link to has-many-relation">​</a></h3>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">use</span><span class="token plain"> </span><span class="token package">Access</span><span class="token package punctuation" style="color:#f8f8f2">\</span><span class="token package">Presenter</span><span class="token package punctuation" style="color:#f8f8f2">\</span><span class="token package">EntityPresenter</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">class</span><span class="token plain"> </span><span class="token class-name-definition class-name" style="color:#e6db74">UserWithProjectsPresenter</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">extends</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">EntityPresenter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">public</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">static</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function-definition function" style="color:#e6db74">getEntityKlass</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token keyword return-type" style="color:#66d9ef">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token keyword" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token class-name static-context" style="color:#e6db74">User</span><span class="token operator" style="color:#66d9ef">::</span><span class="token keyword" style="color:#66d9ef">class</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">public</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function-definition function" style="color:#e6db74">fromEntity</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token class-name type-declaration" style="color:#e6db74">Entity</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$user</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">?</span><span class="token keyword return-type" style="color:#66d9ef">array</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token keyword" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token string single-quoted-string" style="color:#a6e22e">&#x27;id&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$user</span><span class="token operator" style="color:#66d9ef">-&gt;</span><span class="token function" style="color:#e6db74">getId</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token string single-quoted-string" style="color:#a6e22e">&#x27;projects&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$this</span><span class="token operator" style="color:#66d9ef">-&gt;</span><span class="token function" style="color:#e6db74">presentMultipleInversedRefs</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                </span><span class="token class-name static-context" style="color:#e6db74">UserPresenter</span><span class="token operator" style="color:#66d9ef">::</span><span class="token keyword" style="color:#66d9ef">class</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token comment" style="color:#8292a2;font-style:italic">// entity presenter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                </span><span class="token string single-quoted-string" style="color:#a6e22e">&#x27;owner_id&#x27;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token comment" style="color:#8292a2;font-style:italic">// field name linking the user to the projects</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                </span><span class="token variable" style="color:#f8f8f2">$user</span><span class="token operator" style="color:#66d9ef">-&gt;</span><span class="token function" style="color:#e6db74">getId</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token comment" style="color:#8292a2;font-style:italic">// value of the field</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In the background this will do a query to fetch all the projects needed to
resolve these markers, something like this:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">*</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">FROM</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#f8f8f2">`</span><span class="token identifier">projects</span><span class="token identifier punctuation" style="color:#f8f8f2">`</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">WHERE</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#f8f8f2">`</span><span class="token identifier">owner_id</span><span class="token identifier punctuation" style="color:#f8f8f2">`</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">IN</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">:userId</span><span class="token punctuation" style="color:#f8f8f2">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>When there are multiple markers that need to be resolved, the query stays the
same, but will include all user IDs that are needed. Then the result is split
when the markers are resolved.</p>
<p>This entity presenter can be used just like any other.</p>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#8292a2;font-style:italic">// get a user from somewhere</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token variable" style="color:#f8f8f2">$user</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$db</span><span class="token operator" style="color:#66d9ef">-&gt;</span><span class="token function" style="color:#e6db74">findOne</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token class-name static-context" style="color:#e6db74">User</span><span class="token operator" style="color:#66d9ef">::</span><span class="token keyword" style="color:#66d9ef">class</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">1</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token variable" style="color:#f8f8f2">$result</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$db</span><span class="token operator" style="color:#66d9ef">-&gt;</span><span class="token function" style="color:#e6db74">presentEntity</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token class-name static-context" style="color:#e6db74">UserWithProjectsPresenter</span><span class="token operator" style="color:#66d9ef">::</span><span class="token keyword" style="color:#66d9ef">class</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$user</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#8292a2;font-style:italic">// =&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token string single-quoted-string" style="color:#a6e22e">&#x27;id&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">1</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token string single-quoted-string" style="color:#a6e22e">&#x27;projects&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token string single-quoted-string" style="color:#a6e22e">&#x27;id&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">1</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token string single-quoted-string" style="color:#a6e22e">&#x27;owner&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                </span><span class="token string single-quoted-string" style="color:#a6e22e">&#x27;id&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">1</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>As you can see the <code>owner</code> field of the project is also filled, as that entity
presenter uses <code>UserPresenter</code>. This feature is very powerfu, you can easily
create more complex entity presenters by composing them together. Keep in mind,
though, to prevent circular entity presenters. This will throw an exception.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Avoid circular entity presenters</div><div class="admonitionContent_BuS1"><p>This will completely blow up with an <code>Access\Exception</code>.</p></div></div>
<p>You can prevent the circular entity presenters is by creating a completely new
one for every need, like we did in our example from above. We created a new
<code>UserWithProjectsPresenter</code> entity presenter to prevent the circular entity
presenter.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="clauses">Clauses<a href="#clauses" class="hash-link" aria-label="Direct link to Clauses" title="Direct link to Clauses">​</a></h2>
<p>Even though it is possible to do some manipulation with the future helpers,
this can be cumbersome when you only want to sort them, or filter on an extra
field. That&#x27;s were the optional clauses come into play. You can add an extra
clause to some of the helper methods to provide that extra functionality to the
marker. Currently there are two kinds of clauses that you can use, a condition
to filter on an extra field or ordering the results for the &quot;multiple&quot; helpers.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="condition-clauses">Condition clauses<a href="#condition-clauses" class="hash-link" aria-label="Direct link to Condition clauses" title="Direct link to Condition clauses">​</a></h3>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">use</span><span class="token plain"> </span><span class="token package">Access</span><span class="token package punctuation" style="color:#f8f8f2">\</span><span class="token package">Presenter</span><span class="token package punctuation" style="color:#f8f8f2">\</span><span class="token package">EntityPresenter</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">use</span><span class="token plain"> </span><span class="token package">Access</span><span class="token package punctuation" style="color:#f8f8f2">\</span><span class="token package">Clause</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">class</span><span class="token plain"> </span><span class="token class-name-definition class-name" style="color:#e6db74">UserWithPublishedProjectsPresenter</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">extends</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">EntityPresenter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">public</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">static</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function-definition function" style="color:#e6db74">getEntityKlass</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token keyword return-type" style="color:#66d9ef">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token keyword" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token class-name static-context" style="color:#e6db74">User</span><span class="token operator" style="color:#66d9ef">::</span><span class="token keyword" style="color:#66d9ef">class</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">public</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function-definition function" style="color:#e6db74">fromEntity</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token class-name type-declaration" style="color:#e6db74">Entity</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$user</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">?</span><span class="token keyword return-type" style="color:#66d9ef">array</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token keyword" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token string single-quoted-string" style="color:#a6e22e">&#x27;id&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$user</span><span class="token operator" style="color:#66d9ef">-&gt;</span><span class="token function" style="color:#e6db74">getId</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token string single-quoted-string" style="color:#a6e22e">&#x27;publishedProjects&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$this</span><span class="token operator" style="color:#66d9ef">-&gt;</span><span class="token function" style="color:#e6db74">presentMultipleInversedRefs</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                </span><span class="token class-name static-context" style="color:#e6db74">UserPresenter</span><span class="token operator" style="color:#66d9ef">::</span><span class="token keyword" style="color:#66d9ef">class</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token comment" style="color:#8292a2;font-style:italic">// entity presenter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                </span><span class="token string single-quoted-string" style="color:#a6e22e">&#x27;owner_id&#x27;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token comment" style="color:#8292a2;font-style:italic">// field name linking the user to the projects</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                </span><span class="token variable" style="color:#f8f8f2">$user</span><span class="token operator" style="color:#66d9ef">-&gt;</span><span class="token function" style="color:#e6db74">getId</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token comment" style="color:#8292a2;font-style:italic">// value of the field</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name class-name-fully-qualified" style="color:#e6db74">Clause</span><span class="token class-name class-name-fully-qualified punctuation" style="color:#f8f8f2">\</span><span class="token class-name class-name-fully-qualified" style="color:#e6db74">Condition</span><span class="token class-name class-name-fully-qualified punctuation" style="color:#f8f8f2">\</span><span class="token class-name class-name-fully-qualified" style="color:#e6db74">Equals</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string single-quoted-string" style="color:#a6e22e">&#x27;status&#x27;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#a6e22e">&#x27;PUBLISHED&#x27;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This will only add projects to the <code>&#x27;publishedProjects&#x27;</code> list that are published
(<code>status = &#x27;PUBLISHED&#x27;</code>).</p>
<p>There are a whole bunch of conditions you can use and their names speak for
themselves.</p>
<ul>
<li><code>Access\Clauses\Condition\Equals</code></li>
<li><code>Access\Clauses\Condition\GreaterThan</code></li>
<li><code>Access\Clauses\Condition\GreaterThanOrEquals</code></li>
<li><code>Access\Clauses\Condition\IsNotNull</code></li>
<li><code>Access\Clauses\Condition\IsNull</code></li>
<li><code>Access\Clauses\Condition\LessThen</code></li>
<li><code>Access\Clauses\Condition\LessThanOrEquals</code></li>
<li><code>Access\Clauses\Condition\NotEquals</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ordering-clauses">Ordering clauses<a href="#ordering-clauses" class="hash-link" aria-label="Direct link to Ordering clauses" title="Direct link to Ordering clauses">​</a></h3>
<p>To order the projects you can use the <code>Access\Clause\OrderBy</code> clauses.</p>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">use</span><span class="token plain"> </span><span class="token package">Access</span><span class="token package punctuation" style="color:#f8f8f2">\</span><span class="token package">Presenter</span><span class="token package punctuation" style="color:#f8f8f2">\</span><span class="token package">EntityPresenter</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">use</span><span class="token plain"> </span><span class="token package">Access</span><span class="token package punctuation" style="color:#f8f8f2">\</span><span class="token package">Clause</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">class</span><span class="token plain"> </span><span class="token class-name-definition class-name" style="color:#e6db74">UserWithOrderedProjectsPresenter</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">extends</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">EntityPresenter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">public</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">static</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function-definition function" style="color:#e6db74">getEntityKlass</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token keyword return-type" style="color:#66d9ef">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token keyword" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token class-name static-context" style="color:#e6db74">User</span><span class="token operator" style="color:#66d9ef">::</span><span class="token keyword" style="color:#66d9ef">class</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">public</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function-definition function" style="color:#e6db74">fromEntity</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token class-name type-declaration" style="color:#e6db74">Entity</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$user</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">?</span><span class="token keyword return-type" style="color:#66d9ef">array</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token keyword" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token string single-quoted-string" style="color:#a6e22e">&#x27;id&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$user</span><span class="token operator" style="color:#66d9ef">-&gt;</span><span class="token function" style="color:#e6db74">getId</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token string single-quoted-string" style="color:#a6e22e">&#x27;publishedProjects&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$this</span><span class="token operator" style="color:#66d9ef">-&gt;</span><span class="token function" style="color:#e6db74">presentMultipleInversedRefs</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                </span><span class="token class-name static-context" style="color:#e6db74">UserPresenter</span><span class="token operator" style="color:#66d9ef">::</span><span class="token keyword" style="color:#66d9ef">class</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token comment" style="color:#8292a2;font-style:italic">// entity presenter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                </span><span class="token string single-quoted-string" style="color:#a6e22e">&#x27;owner_id&#x27;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token comment" style="color:#8292a2;font-style:italic">// field name linking the user to the projects</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                </span><span class="token variable" style="color:#f8f8f2">$user</span><span class="token operator" style="color:#66d9ef">-&gt;</span><span class="token function" style="color:#e6db74">getId</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token comment" style="color:#8292a2;font-style:italic">// value of the field</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name class-name-fully-qualified" style="color:#e6db74">Clause</span><span class="token class-name class-name-fully-qualified punctuation" style="color:#f8f8f2">\</span><span class="token class-name class-name-fully-qualified" style="color:#e6db74">OrderBy</span><span class="token class-name class-name-fully-qualified punctuation" style="color:#f8f8f2">\</span><span class="token class-name class-name-fully-qualified" style="color:#e6db74">Ascending</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string single-quoted-string" style="color:#a6e22e">&#x27;name&#x27;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>There are only two order by clauses:</p>
<ul>
<li><code>Access\Clause\OrderBy\Ascending</code></li>
<li><code>Access\Clause\OrderBy\Descending</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="multiple-clauses">Multiple clauses<a href="#multiple-clauses" class="hash-link" aria-label="Direct link to Multiple clauses" title="Direct link to Multiple clauses">​</a></h3>
<p>And if you want to mix multiple clauses together, if, for example, you want the
list to contain published projects and also want to order them. The special
<code>Access\Clauses\Multiple</code> clause will help you here, if combines multiple
conditions together and all conditions need to be true. Or if you provide
multiple order by clauses they all will be used (you can sorting on status and
then on name, for example). There is also the <code>Access\Clauses\MultipleOr</code> clause
if you want only one of the condition clauses to be true. You can add as many
clauses to the <code>Multiple</code> as you like, and you can mix order by and condition
clauses.</p>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">use</span><span class="token plain"> </span><span class="token package">Access</span><span class="token package punctuation" style="color:#f8f8f2">\</span><span class="token package">Presenter</span><span class="token package punctuation" style="color:#f8f8f2">\</span><span class="token package">EntityPresenter</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">use</span><span class="token plain"> </span><span class="token package">Access</span><span class="token package punctuation" style="color:#f8f8f2">\</span><span class="token package">Clause</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">class</span><span class="token plain"> </span><span class="token class-name-definition class-name" style="color:#e6db74">UserWithOrderedPublishedProjectsPresenter</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">extends</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">EntityPresenter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">public</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">static</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function-definition function" style="color:#e6db74">getEntityKlass</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token keyword return-type" style="color:#66d9ef">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token keyword" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token class-name static-context" style="color:#e6db74">User</span><span class="token operator" style="color:#66d9ef">::</span><span class="token keyword" style="color:#66d9ef">class</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">public</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function-definition function" style="color:#e6db74">fromEntity</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token class-name type-declaration" style="color:#e6db74">Entity</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$user</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">?</span><span class="token keyword return-type" style="color:#66d9ef">array</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token keyword" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token string single-quoted-string" style="color:#a6e22e">&#x27;id&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$user</span><span class="token operator" style="color:#66d9ef">-&gt;</span><span class="token function" style="color:#e6db74">getId</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token string single-quoted-string" style="color:#a6e22e">&#x27;publishedProjects&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$this</span><span class="token operator" style="color:#66d9ef">-&gt;</span><span class="token function" style="color:#e6db74">presentMultipleInversedRefs</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                </span><span class="token class-name static-context" style="color:#e6db74">UserPresenter</span><span class="token operator" style="color:#66d9ef">::</span><span class="token keyword" style="color:#66d9ef">class</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token comment" style="color:#8292a2;font-style:italic">// entity presenter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                </span><span class="token string single-quoted-string" style="color:#a6e22e">&#x27;owner_id&#x27;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token comment" style="color:#8292a2;font-style:italic">// field name linking the user to the projects</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                </span><span class="token variable" style="color:#f8f8f2">$user</span><span class="token operator" style="color:#66d9ef">-&gt;</span><span class="token function" style="color:#e6db74">getId</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token comment" style="color:#8292a2;font-style:italic">// value of the field</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name class-name-fully-qualified" style="color:#e6db74">Clause</span><span class="token class-name class-name-fully-qualified punctuation" style="color:#f8f8f2">\</span><span class="token class-name class-name-fully-qualified" style="color:#e6db74">Multiple</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                    </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name class-name-fully-qualified" style="color:#e6db74">Clause</span><span class="token class-name class-name-fully-qualified punctuation" style="color:#f8f8f2">\</span><span class="token class-name class-name-fully-qualified" style="color:#e6db74">Condition</span><span class="token class-name class-name-fully-qualified punctuation" style="color:#f8f8f2">\</span><span class="token class-name class-name-fully-qualified" style="color:#e6db74">Equals</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string single-quoted-string" style="color:#a6e22e">&#x27;status&#x27;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#a6e22e">&#x27;PUBLISHED&#x27;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                    </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name class-name-fully-qualified" style="color:#e6db74">Clause</span><span class="token class-name class-name-fully-qualified punctuation" style="color:#f8f8f2">\</span><span class="token class-name class-name-fully-qualified" style="color:#e6db74">OrderBy</span><span class="token class-name class-name-fully-qualified punctuation" style="color:#f8f8f2">\</span><span class="token class-name class-name-fully-qualified" style="color:#e6db74">Ascending</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string single-quoted-string" style="color:#a6e22e">&#x27;name&#x27;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">                </span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="presenter-instance"><code>Presenter</code> instance<a href="#presenter-instance" class="hash-link" aria-label="Direct link to presenter-instance" title="Direct link to presenter-instance">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="dependency-injection">Dependency injection<a href="#dependency-injection" class="hash-link" aria-label="Direct link to Dependency injection" title="Direct link to Dependency injection">​</a></h3>
<p>Sometimes you need a bit more information than just the entity you are
converting, like some service to generate URLs. The presenter functions like a
rudimentary dependency container. First you need access to the <code>Presenter</code> that
is used for the actual presenting, so far we&#x27;ve only looked at the shortcuts to
skip creating a <code>Presenter</code>. To get an presenter you can just call
<code>createPresenter</code> on the <a href="/docs/database">database</a> instance.</p>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#8292a2;font-style:italic">// result an `Access\Presenter`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token variable" style="color:#f8f8f2">$presenter</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$db</span><span class="token operator" style="color:#66d9ef">-&gt;</span><span class="token function" style="color:#e6db74">createPresenter</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This presenter instance provides the same methods to do the actual presenting as
the <code>Database</code> instance, <code>presentEntity</code> and <code>presentCollection</code>. But, there are
also some extra methods to prepare your presenting work for a bit more heavy
lifting.</p>
<p>First up, you can add a dependency to the presenter that your entity presenters
can use.</p>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#8292a2;font-style:italic">// get a URL service somewhere</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#8292a2;font-style:italic">// for our exmple, this is an `App\UrlService` object</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token variable" style="color:#f8f8f2">$urlService</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$this</span><span class="token operator" style="color:#66d9ef">-&gt;</span><span class="token function" style="color:#e6db74">getSomeUrlService</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token variable" style="color:#f8f8f2">$presenter</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$db</span><span class="token operator" style="color:#66d9ef">-&gt;</span><span class="token function" style="color:#e6db74">createPresenter</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token variable" style="color:#f8f8f2">$presenter</span><span class="token operator" style="color:#66d9ef">-&gt;</span><span class="token function" style="color:#e6db74">addDependency</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token variable" style="color:#f8f8f2">$urlService</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now your presenter a reference to the URL service, but on its own nothing
happens. We need a way for the entity presenters to access this dependency.
Dependencies are injected into the constructor of the entity presenter and are
matched on type.</p>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">use</span><span class="token plain"> </span><span class="token package">Access</span><span class="token package punctuation" style="color:#f8f8f2">\</span><span class="token package">Presenter</span><span class="token package punctuation" style="color:#f8f8f2">\</span><span class="token package">EntityPresenter</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">class</span><span class="token plain"> </span><span class="token class-name-definition class-name" style="color:#e6db74">UserWithExternalUrlPresenter</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">extends</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">EntityPresenter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">private</span><span class="token plain"> </span><span class="token class-name class-name-fully-qualified type-declaration" style="color:#e6db74">App</span><span class="token class-name class-name-fully-qualified type-declaration punctuation" style="color:#f8f8f2">\</span><span class="token class-name class-name-fully-qualified type-declaration" style="color:#e6db74">UrlService</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$urlService</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">public</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function-definition function" style="color:#e6db74">__construct</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token class-name class-name-fully-qualified type-declaration" style="color:#e6db74">App</span><span class="token class-name class-name-fully-qualified type-declaration punctuation" style="color:#f8f8f2">\</span><span class="token class-name class-name-fully-qualified type-declaration" style="color:#e6db74">UrlService</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$urlService</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token variable" style="color:#f8f8f2">$this</span><span class="token operator" style="color:#66d9ef">-&gt;</span><span class="token property" style="color:#f92672">urlService</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$urlService</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token comment" style="color:#8292a2;font-style:italic">// .. get presenter class</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">public</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function-definition function" style="color:#e6db74">fromEntity</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token class-name type-declaration" style="color:#e6db74">Entity</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$user</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">?</span><span class="token keyword return-type" style="color:#66d9ef">array</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token keyword" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token string single-quoted-string" style="color:#a6e22e">&#x27;id&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">1</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token string single-quoted-string" style="color:#a6e22e">&#x27;externalUrl&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$this</span><span class="token operator" style="color:#66d9ef">-&gt;</span><span class="token property" style="color:#f92672">urlService</span><span class="token operator" style="color:#66d9ef">-&gt;</span><span class="token function" style="color:#e6db74">generate</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token variable" style="color:#f8f8f2">$user</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Dependencies are only injected into entity presenters with an constructor and
the order of dependencies does not matter. And your entity can also mark the
dependency as optional with a default value for the constructor argument.
Otherwise the presenter will throw an exception when a dependency is not
available.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="providing-collections">Providing collections<a href="#providing-collections" class="hash-link" aria-label="Direct link to Providing collections" title="Direct link to Providing collections">​</a></h3>
<p>In some cases you already know which entities are needed to resolve some
markers, when, for example, you already fetched those entities to does some
calculations. In this case you don&#x27;t what to fetch them again when there is a
marker for one of those entities. You can add those entities as a collection to
the presenter for future use with <code>provideCollection</code>.</p>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#8292a2;font-style:italic">// the some users from somewhere</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token variable" style="color:#f8f8f2">$users</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$db</span><span class="token operator" style="color:#66d9ef">-&gt;</span><span class="token function" style="color:#e6db74">getRepository</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token class-name static-context" style="color:#e6db74">User</span><span class="token operator" style="color:#66d9ef">::</span><span class="token keyword" style="color:#66d9ef">class</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token operator" style="color:#66d9ef">-&gt;</span><span class="token function" style="color:#e6db74">findAllCollection</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#8292a2;font-style:italic">// get a project from somewhere</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token variable" style="color:#f8f8f2">$project</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$db</span><span class="token operator" style="color:#66d9ef">-&gt;</span><span class="token function" style="color:#e6db74">findOne</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token class-name static-context" style="color:#e6db74">Project</span><span class="token operator" style="color:#66d9ef">::</span><span class="token keyword" style="color:#66d9ef">class</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">1</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token variable" style="color:#f8f8f2">$presenter</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$db</span><span class="token operator" style="color:#66d9ef">-&gt;</span><span class="token function" style="color:#e6db74">createPresenter</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token variable" style="color:#f8f8f2">$presenter</span><span class="token operator" style="color:#66d9ef">-&gt;</span><span class="token function" style="color:#e6db74">provideCollection</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token class-name static-context" style="color:#e6db74">User</span><span class="token operator" style="color:#66d9ef">::</span><span class="token keyword" style="color:#66d9ef">class</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$users</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token variable" style="color:#f8f8f2">$result</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$presenter</span><span class="token operator" style="color:#66d9ef">-&gt;</span><span class="token function" style="color:#e6db74">presentEntity</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token class-name static-context" style="color:#e6db74">ProjectPresenter</span><span class="token operator" style="color:#66d9ef">::</span><span class="token keyword" style="color:#66d9ef">class</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$project</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This will <em>not</em> does additional queries to fetch the user needed for the owner
marker in the <code>ProjectPresenter</code> entity presenter. Unless, of course, the
specific user is not available in the collection; in that case an addition query
will be executed.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="custom-markers">Custom markers<a href="#custom-markers" class="hash-link" aria-label="Direct link to Custom markers" title="Direct link to Custom markers">​</a></h2>
<p>To have a bit of flexibility to lazily fetch other information than entities it
is also possible to use custom markers. Custom markers allow you to collect
information that you want to resolve in a single pass, like presenting
information about an entities coming from other source. For example:</p>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">use</span><span class="token plain"> </span><span class="token package">Access</span><span class="token package punctuation" style="color:#f8f8f2">\</span><span class="token package">Presenter</span><span class="token package punctuation" style="color:#f8f8f2">\</span><span class="token package">CustomMarkerInterface</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">class</span><span class="token plain"> </span><span class="token class-name-definition class-name" style="color:#e6db74">SomeMarker</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">implements</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">CustomMarkerInterface</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">public</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function-definition function" style="color:#e6db74">__construct</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token keyword" style="color:#66d9ef">private</span><span class="token plain"> </span><span class="token keyword type-declaration" style="color:#66d9ef">mixed</span><span class="token plain"> </span><span class="token variable" style="color:#f8f8f2">$someId</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token comment" style="color:#8292a2;font-style:italic">// add some ID to a pool somewhere</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">public</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function-definition function" style="color:#e6db74">fetch</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token keyword return-type" style="color:#66d9ef">mixed</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token comment" style="color:#8292a2;font-style:italic">// do something with the information fetch based on the ID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In your presenter you can just return an instance of <code>SomeMarker</code>, and in the
resolve pass of the presenter all custom markers will be fetched. A typical
setup would be to inject a <code>SomeMarker</code> provider that collects the IDs and will
do the needed calculations when the first fetch is done.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/justim/access/edit/master/website/../docs/presenters.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/collections"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Collections</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/transactions"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Transactions</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#simple-entity-presenter" class="table-of-contents__link toc-highlight">Simple entity presenter</a></li><li><a href="#collection-presenters" class="table-of-contents__link toc-highlight">Collection presenters</a></li><li><a href="#nested-presenters" class="table-of-contents__link toc-highlight">Nested presenters</a><ul><li><a href="#has-many-relation" class="table-of-contents__link toc-highlight"><code>has-many</code> relation</a></li></ul></li><li><a href="#clauses" class="table-of-contents__link toc-highlight">Clauses</a><ul><li><a href="#condition-clauses" class="table-of-contents__link toc-highlight">Condition clauses</a></li><li><a href="#ordering-clauses" class="table-of-contents__link toc-highlight">Ordering clauses</a></li><li><a href="#multiple-clauses" class="table-of-contents__link toc-highlight">Multiple clauses</a></li></ul></li><li><a href="#presenter-instance" class="table-of-contents__link toc-highlight"><code>Presenter</code> instance</a><ul><li><a href="#dependency-injection" class="table-of-contents__link toc-highlight">Dependency injection</a></li><li><a href="#providing-collections" class="table-of-contents__link toc-highlight">Providing collections</a></li></ul></li><li><a href="#custom-markers" class="table-of-contents__link toc-highlight">Custom markers</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Access</div></div></div></footer></div>
</body>
</html>